!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(e){e.fn.jScrollPane=function(t){function o(t,o){var n,i,s,r,a,c,l,p,d,u,f,h,j,g,v,m,b,w,k,y,C,T,B,D,x,H,S,P,A,W,Y,z,M,X,R=this,I=!0,F=!0,L=!1,q=!1,O=t.clone(!1,!1).empty(),V=e.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";function G(o){var y,I,F,L,q,O,ae,ce,le,pe,de,ue,fe,he,je=!1,ge=!1;if(n=o,void 0===i)q=t.scrollTop(),O=t.scrollLeft(),t.css({overflow:"hidden",padding:0}),s=t.innerWidth()+M,r=t.innerHeight(),t.width(s),i=e('<div class="jspPane" />').css("padding",z).append(t.children()),a=e('<div class="jspContainer" />').css({width:s+"px",height:r+"px"}).append(i).appendTo(t);else{if(t.css("width",""),je=n.stickToBottom&&((ce=l-r)>20&&ce-se()<10),ge=n.stickToRight&&((ae=c-s)>20&&ae-ie()<10),(L=t.innerWidth()+M!=s||t.outerHeight()!=r)&&(s=t.innerWidth()+M,r=t.innerHeight(),a.css({width:s+"px",height:r+"px"})),!L&&X==c&&i.outerHeight()==l)return void t.width(s);X=c,i.css("width",""),t.width(s),a.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}i.css("overflow","auto"),c=o.contentWidth?o.contentWidth:i[0].scrollWidth,l=i[0].scrollHeight,i.css("overflow",""),u=(d=l/r)>1,(f=(p=c/s)>1)||u?(t.addClass("jspScrollable"),(y=n.maintainPosition&&(g||b))&&(I=ie(),F=se()),u&&(a.append(e('<div class="jspVerticalBar" />').append(e('<div class="jspCap jspCapTop" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragTop" />'),e('<div class="jspDragBottom" />'))),e('<div class="jspCap jspCapBottom" />'))),w=a.find(">.jspVerticalBar"),k=w.find(">.jspTrack"),h=k.find(">.jspDrag"),n.showArrows&&(B=e('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",Q(0,-1)).bind("click.jsp",re),D=e('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",Q(0,1)).bind("click.jsp",re),n.arrowScrollOnHover&&(B.bind("mouseover.jsp",Q(0,-1,B)),D.bind("mouseover.jsp",Q(0,1,D))),K(k,n.verticalArrowPositions,B,D)),C=r,a.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){C-=e(this).outerHeight()}),h.hover(function(){h.addClass("jspHover")},function(){h.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",re),h.addClass("jspActive");var o=t.pageY-h.position().top;return e("html").bind("mousemove.jsp",function(e){J(e.pageY-o,!1)}).bind("mouseup.jsp mouseleave.jsp",$),!1}),N()),f&&(a.append(e('<div class="jspHorizontalBar" />').append(e('<div class="jspCap jspCapLeft" />'),e('<div class="jspTrack" />').append(e('<div class="jspDrag" />').append(e('<div class="jspDragLeft" />'),e('<div class="jspDragRight" />'))),e('<div class="jspCap jspCapRight" />'))),x=a.find(">.jspHorizontalBar"),H=x.find(">.jspTrack"),v=H.find(">.jspDrag"),n.showArrows&&(A=e('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",Q(-1,0)).bind("click.jsp",re),W=e('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",Q(1,0)).bind("click.jsp",re),n.arrowScrollOnHover&&(A.bind("mouseover.jsp",Q(-1,0,A)),W.bind("mouseover.jsp",Q(1,0,W))),K(H,n.horizontalArrowPositions,A,W)),v.hover(function(){v.addClass("jspHover")},function(){v.removeClass("jspHover")}).bind("mousedown.jsp",function(t){e("html").bind("dragstart.jsp selectstart.jsp",re),v.addClass("jspActive");var o=t.pageX-v.position().left;return e("html").bind("mousemove.jsp",function(e){_(e.pageX-o,!1)}).bind("mouseup.jsp mouseleave.jsp",$),!1}),S=a.innerWidth(),E()),function(){if(f&&u){var t=H.outerHeight(),o=k.outerWidth();C-=t,e(x).find(">.jspCap:visible,>.jspArrow").each(function(){S+=e(this).outerWidth()}),S-=o,r-=o,s-=t,H.parent().append(e('<div class="jspCorner" />').css("width",t+"px")),N(),E()}f&&i.width(a.outerWidth()-M+"px");l=i.outerHeight(),d=l/r,f&&((P=Math.ceil(1/p*S))>n.horizontalDragMaxWidth?P=n.horizontalDragMaxWidth:P<n.horizontalDragMinWidth&&(P=n.horizontalDragMinWidth),v.width(P+"px"),m=S-P,ee(b));u&&((T=Math.ceil(1/d*C))>n.verticalDragMaxHeight?T=n.verticalDragMaxHeight:T<n.verticalDragMinHeight&&(T=n.verticalDragMinHeight),h.height(T+"px"),j=C-T,Z(g))}(),y&&(oe(ge?c-s:I,!1),te(je?l-r:F,!1)),i.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(e){ne(e.target,!1)}),a.unbind(V).bind(V,function(e,t,o,i){b||(b=0),g||(g=0);var s=b,r=g,a=e.deltaFactor||n.mouseWheelSpeed;return R.scrollBy(o*a,-i*a,!1),s==b&&r==g}),he=!1,a.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(e){var t=e.originalEvent.touches[0];le=ie(),pe=se(),de=t.pageX,ue=t.pageY,fe=!1,he=!0}).bind("touchmove.jsp",function(e){if(he){var t=e.originalEvent.touches[0],o=b,n=g;return R.scrollTo(le+de-t.pageX,pe+ue-t.pageY),fe=fe||Math.abs(de-t.pageX)>5||Math.abs(ue-t.pageY)>5,o==b&&n==g}}).bind("touchend.jsp",function(e){he=!1}).bind("click.jsp-touchclick",function(e){if(fe)return fe=!1,!1}),n.enableKeyboardNavigation&&function(){var o,s,c=[];f&&c.push(x[0]),u&&c.push(w[0]),i.bind("focus.jsp",function(){t.focus()}),t.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this||c.length&&e(t.target).closest(c).length){var n=b,i=g;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:o=t.keyCode,p();break;case 35:te(l-r),o=null;break;case 36:te(0),o=null}return!(s=t.keyCode==o&&n!=b||i!=g)}}).bind("keypress.jsp",function(e){return e.keyCode==o&&p(),!s}),n.hideFocus?(t.css("outline","none"),"hideFocus"in a[0]&&t.attr("hideFocus",!0)):(t.css("outline",""),"hideFocus"in a[0]&&t.attr("hideFocus",!1));function p(){var e=b,t=g;switch(o){case 40:R.scrollByY(n.keyboardSpeed,!1);break;case 38:R.scrollByY(-n.keyboardSpeed,!1);break;case 34:case 32:R.scrollByY(r*n.scrollPagePercent,!1);break;case 33:R.scrollByY(-r*n.scrollPagePercent,!1);break;case 39:R.scrollByX(n.keyboardSpeed,!1);break;case 37:R.scrollByX(-n.keyboardSpeed,!1)}return s=e!=b||t!=g}}(),n.clickOnTrack&&function(){U(),u&&k.bind("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var o,i=e(this),s=i.offset(),a=t.pageY-s.top-g,c=!0,p=function(){var e=i.offset(),s=t.pageY-e.top-T/2,u=r*n.scrollPagePercent,f=j*u/(l-r);if(a<0)g-f>s?R.scrollByY(-u):J(s);else{if(!(a>0))return void d();g+f<s?R.scrollByY(u):J(s)}o=setTimeout(p,c?n.initialDelay:n.trackClickRepeatFreq),c=!1},d=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",d)};return p(),e(document).bind("mouseup.jsp",d),!1}});f&&H.bind("mousedown.jsp",function(t){if(void 0===t.originalTarget||t.originalTarget==t.currentTarget){var o,i=e(this),r=i.offset(),a=t.pageX-r.left-b,l=!0,p=function(){var e=i.offset(),r=t.pageX-e.left-P/2,u=s*n.scrollPagePercent,f=m*u/(c-s);if(a<0)b-f>r?R.scrollByX(-u):_(r);else{if(!(a>0))return void d();b+f<r?R.scrollByX(u):_(r)}o=setTimeout(p,l?n.initialDelay:n.trackClickRepeatFreq),l=!1},d=function(){o&&clearTimeout(o),o=null,e(document).unbind("mouseup.jsp",d)};return p(),e(document).bind("mouseup.jsp",d),!1}})}(),function(){if(location.hash&&location.hash.length>1){var t,o,n=escape(location.hash.substr(1));try{t=e("#"+n+', a[name="'+n+'"]')}catch(e){return}t.length&&i.find(n)&&(0===a.scrollTop()?o=setInterval(function(){a.scrollTop()>0&&(ne(t,!0),e(document).scrollTop(a.position().top),clearInterval(o))},50):(ne(t,!0),e(document).scrollTop(a.position().top)))}}(),n.hijackInternalLinks&&function(){if(e(document.body).data("jspHijack"))return;e(document.body).data("jspHijack",!0),e(document.body).delegate("a[href*=#]","click",function(t){var o,n,i,s,r,a=this.href.substr(0,this.href.indexOf("#")),c=location.href;if(-1!==location.href.indexOf("#")&&(c=location.href.substr(0,location.href.indexOf("#"))),a===c){o=escape(this.href.substr(this.href.indexOf("#")+1));try{n=e("#"+o+', a[name="'+o+'"]')}catch(e){return}n.length&&(i=n.closest(".jspScrollable"),i.data("jsp").scrollToElement(n,!0),i[0].scrollIntoView&&(s=e(window).scrollTop(),((r=n.offset().top)<s||r>s+e(window).height())&&i[0].scrollIntoView()),t.preventDefault())}})}()):(t.removeClass("jspScrollable"),i.css({top:0,left:0,width:a.width()-M}),a.unbind(V),i.find(":input,a").unbind("focus.jsp"),t.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),i.unbind(".jsp"),U()),n.autoReinitialise&&!Y?Y=setInterval(function(){G(n)},n.autoReinitialiseDelay):!n.autoReinitialise&&Y&&clearInterval(Y),q&&t.scrollTop(0)&&te(q,!1),O&&t.scrollLeft(0)&&oe(O,!1),t.trigger("jsp-initialised",[f||u])}function N(){k.height(C+"px"),g=0,y=n.verticalGutter+k.outerWidth(),i.width(s-y-M);try{0===w.position().left&&i.css("margin-left",y+"px")}catch(e){}}function E(){a.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){S-=e(this).outerWidth()}),H.width(S+"px"),b=0}function K(e,t,o,n){var i,s="before",r="after";"os"==t&&(t=/Mac/.test(navigator.platform)?"after":"split"),t==s?r=t:t==r&&(s=t,i=o,o=n,n=i),e[s](o)[r](n)}function Q(t,o,i){return function(){return function(t,o,i,s){i=e(i).addClass("jspActive");var r,a,c=!0,l=function(){0!==t&&R.scrollByX(t*n.arrowButtonSpeed),0!==o&&R.scrollByY(o*n.arrowButtonSpeed),a=setTimeout(l,c?n.initialDelay:n.arrowRepeatFreq),c=!1};l(),r=s?"mouseout.jsp":"mouseup.jsp",(s=s||e("html")).bind(r,function(){i.removeClass("jspActive"),a&&clearTimeout(a),a=null,s.unbind(r)})}(t,o,this,i),this.blur(),!1}}function U(){H&&H.unbind("mousedown.jsp"),k&&k.unbind("mousedown.jsp")}function $(){e("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),h&&h.removeClass("jspActive"),v&&v.removeClass("jspActive")}function J(e,t){u&&(e<0?e=0:e>j&&(e=j),void 0===t&&(t=n.animateScroll),t?R.animate(h,"top",e,Z):(h.css("top",e),Z(e)))}function Z(e){void 0===e&&(e=h.position().top),a.scrollTop(0);var o=0===(g=e||0),s=g==j,c=-(e/j)*(l-r);I==o&&L==s||(I=o,L=s,t.trigger("jsp-arrow-change",[I,L,F,q])),function(e,t){n.showArrows&&(B[e?"addClass":"removeClass"]("jspDisabled"),D[t?"addClass":"removeClass"]("jspDisabled"))}(o,s),i.css("top",c),t.trigger("jsp-scroll-y",[-c,o,s]).trigger("scroll")}function _(e,t){f&&(e<0?e=0:e>m&&(e=m),void 0===t&&(t=n.animateScroll),t?R.animate(v,"left",e,ee):(v.css("left",e),ee(e)))}function ee(e){void 0===e&&(e=v.position().left),a.scrollTop(0);var o=0===(b=e||0),r=b==m,l=-(e/m)*(c-s);F==o&&q==r||(F=o,q=r,t.trigger("jsp-arrow-change",[I,L,F,q])),function(e,t){n.showArrows&&(A[e?"addClass":"removeClass"]("jspDisabled"),W[t?"addClass":"removeClass"]("jspDisabled"))}(o,r),i.css("left",l),t.trigger("jsp-scroll-x",[-l,o,r]).trigger("scroll")}function te(e,t){J(e/(l-r)*j,t)}function oe(e,t){_(e/(c-s)*m,t)}function ne(t,o,i){var c,l,p,d,u,f,h,j,g,v=0,m=0;try{c=e(t)}catch(e){return}for(l=c.outerHeight(),p=c.outerWidth(),a.scrollTop(0),a.scrollLeft(0);!c.is(".jspPane");)if(v+=c.position().top,m+=c.position().left,c=c.offsetParent(),/^body|html$/i.test(c[0].nodeName))return;f=(d=se())+r,v<d||o?j=v-n.horizontalGutter:v+l>f&&(j=v-r+l+n.horizontalGutter),isNaN(j)||te(j,i),h=(u=ie())+s,m<u||o?g=m-n.horizontalGutter:m+p>h&&(g=m-s+p+n.horizontalGutter),isNaN(g)||oe(g,i)}function ie(){return-i.position().left}function se(){return-i.position().top}function re(){return!1}"border-box"===t.css("box-sizing")?(z=0,M=0):(z=t.css("paddingTop")+" "+t.css("paddingRight")+" "+t.css("paddingBottom")+" "+t.css("paddingLeft"),M=(parseInt(t.css("paddingLeft"),10)||0)+(parseInt(t.css("paddingRight"),10)||0)),e.extend(R,{reinitialise:function(t){G(t=e.extend({},n,t))},scrollToElement:function(e,t,o){ne(e,t,o)},scrollTo:function(e,t,o){oe(e,o),te(t,o)},scrollToX:function(e,t){oe(e,t)},scrollToY:function(e,t){te(e,t)},scrollToPercentX:function(e,t){oe(e*(c-s),t)},scrollToPercentY:function(e,t){te(e*(l-r),t)},scrollBy:function(e,t,o){R.scrollByX(e,o),R.scrollByY(t,o)},scrollByX:function(e,t){_((ie()+Math[e<0?"floor":"ceil"](e))/(c-s)*m,t)},scrollByY:function(e,t){J((se()+Math[e<0?"floor":"ceil"](e))/(l-r)*j,t)},positionDragX:function(e,t){_(e,t)},positionDragY:function(e,t){J(e,t)},animate:function(e,t,o,i){var s={};s[t]=o,e.animate(s,{duration:n.animateDuration,easing:n.animateEase,queue:!1,step:i})},getContentPositionX:function(){return ie()},getContentPositionY:function(){return se()},getContentWidth:function(){return c},getContentHeight:function(){return l},getPercentScrolledX:function(){return ie()/(c-s)},getPercentScrolledY:function(){return se()/(l-r)},getIsScrollableH:function(){return f},getIsScrollableV:function(){return u},getContentPane:function(){return i},scrollToBottom:function(e){J(j,e)},hijackInternalLinks:e.noop,destroy:function(){var e,o;e=se(),o=ie(),t.removeClass("jspScrollable").unbind(".jsp"),i.unbind(".jsp"),t.replaceWith(O.append(i.children())),O.scrollTop(e),O.scrollLeft(o),Y&&clearInterval(Y)}}),G(o)}return t=e.extend({},e.fn.jScrollPane.defaults,t),e.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){t[this]=t[this]||t.speed}),this.each(function(){var n=e(this),i=n.data("jsp");i?i.reinitialise(t):(e("script",n).filter('[type="text/javascript"],:not([type])').remove(),i=new o(n,t),n.data("jsp",i))})},e.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:void 0,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}});